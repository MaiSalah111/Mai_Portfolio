{"ast":null,"code":"import * as React from 'react';\nimport { useRef, useEffect } from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { suspend } from 'suspend-react';\nimport { Events } from 'hls.js';\nvar _window$document, _window$navigator;\nconst IS_BROWSER = typeof window !== 'undefined' && typeof ((_window$document = window.document) == null ? void 0 : _window$document.createElement) === 'function' && typeof ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.userAgent) === 'string';\nlet _HLSModule = null;\nasync function getHls() {\n  var _HLSModule2;\n  (_HLSModule2 = _HLSModule) !== null && _HLSModule2 !== void 0 ? _HLSModule2 : _HLSModule = await import('hls.js'); // singleton\n  const Ctor = _HLSModule.default;\n  if (Ctor.isSupported()) {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return new Ctor(...args);\n  }\n  return null;\n}\nfunction useVideoTexture(srcOrSrcObject) {\n  let {\n    unsuspend = 'loadedmetadata',\n    start = true,\n    hls: hlsConfig = {},\n    crossOrigin = 'anonymous',\n    muted = true,\n    loop = true,\n    playsInline = true,\n    ...videoProps\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const gl = useThree(state => state.gl);\n  const hlsRef = useRef(null);\n  const texture = suspend(() => new Promise(async res => {\n    let src = undefined;\n    let srcObject = undefined;\n    if (typeof srcOrSrcObject === 'string') {\n      src = srcOrSrcObject;\n    } else {\n      srcObject = srcOrSrcObject;\n    }\n    const video = Object.assign(document.createElement('video'), {\n      src,\n      srcObject,\n      crossOrigin,\n      loop,\n      muted,\n      playsInline,\n      ...videoProps\n    });\n\n    // hlsjs extension\n    if (src && IS_BROWSER && src.endsWith('.m3u8')) {\n      const hls = hlsRef.current = await getHls(hlsConfig);\n      if (hls) {\n        hls.on(Events.MEDIA_ATTACHED, () => void hls.loadSource(src));\n        hls.attachMedia(video);\n      }\n    }\n    const texture = new THREE.VideoTexture(video);\n    if ('colorSpace' in texture) texture.colorSpace = gl.outputColorSpace;else texture.encoding = gl.outputEncoding;\n    video.addEventListener(unsuspend, () => res(texture));\n  }), [srcOrSrcObject]);\n  useEffect(() => {\n    start && texture.image.play();\n    return () => {\n      if (hlsRef.current) {\n        hlsRef.current.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [texture, start]);\n  return texture;\n}\n\n//\n\nconst VideoTexture = _ref => {\n  let {\n    children,\n    src,\n    ...config\n  } = _ref;\n  const ret = useVideoTexture(src, config);\n  useEffect(() => {\n    return () => void ret.dispose();\n  }, [ret]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children == null ? void 0 : children(ret));\n};\nexport { VideoTexture, useVideoTexture };","map":{"version":3,"names":["React","useRef","useEffect","THREE","useThree","suspend","Events","_window$document","_window$navigator","IS_BROWSER","window","document","createElement","navigator","userAgent","_HLSModule","getHls","_HLSModule2","Ctor","default","isSupported","_len","arguments","length","args","Array","_key","useVideoTexture","srcOrSrcObject","unsuspend","start","hls","hlsConfig","crossOrigin","muted","loop","playsInline","videoProps","undefined","gl","state","hlsRef","texture","Promise","res","src","srcObject","video","Object","assign","endsWith","current","on","MEDIA_ATTACHED","loadSource","attachMedia","VideoTexture","colorSpace","outputColorSpace","encoding","outputEncoding","addEventListener","image","play","destroy","_ref","children","config","ret","dispose","Fragment"],"sources":["/Users/mai/Desktop/Mai_Portfolio/node_modules/@react-three/drei/core/VideoTexture.js"],"sourcesContent":["import * as React from 'react';\nimport { useRef, useEffect } from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { suspend } from 'suspend-react';\nimport { Events } from 'hls.js';\n\nvar _window$document, _window$navigator;\nconst IS_BROWSER = typeof window !== 'undefined' && typeof ((_window$document = window.document) == null ? void 0 : _window$document.createElement) === 'function' && typeof ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.userAgent) === 'string';\nlet _HLSModule = null;\nasync function getHls(...args) {\n  var _HLSModule2;\n  (_HLSModule2 = _HLSModule) !== null && _HLSModule2 !== void 0 ? _HLSModule2 : _HLSModule = await import('hls.js'); // singleton\n  const Ctor = _HLSModule.default;\n  if (Ctor.isSupported()) {\n    return new Ctor(...args);\n  }\n  return null;\n}\nfunction useVideoTexture(srcOrSrcObject, {\n  unsuspend = 'loadedmetadata',\n  start = true,\n  hls: hlsConfig = {},\n  crossOrigin = 'anonymous',\n  muted = true,\n  loop = true,\n  playsInline = true,\n  ...videoProps\n} = {}) {\n  const gl = useThree(state => state.gl);\n  const hlsRef = useRef(null);\n  const texture = suspend(() => new Promise(async res => {\n    let src = undefined;\n    let srcObject = undefined;\n    if (typeof srcOrSrcObject === 'string') {\n      src = srcOrSrcObject;\n    } else {\n      srcObject = srcOrSrcObject;\n    }\n    const video = Object.assign(document.createElement('video'), {\n      src,\n      srcObject,\n      crossOrigin,\n      loop,\n      muted,\n      playsInline,\n      ...videoProps\n    });\n\n    // hlsjs extension\n    if (src && IS_BROWSER && src.endsWith('.m3u8')) {\n      const hls = hlsRef.current = await getHls(hlsConfig);\n      if (hls) {\n        hls.on(Events.MEDIA_ATTACHED, () => void hls.loadSource(src));\n        hls.attachMedia(video);\n      }\n    }\n    const texture = new THREE.VideoTexture(video);\n    if ('colorSpace' in texture) texture.colorSpace = gl.outputColorSpace;else texture.encoding = gl.outputEncoding;\n    video.addEventListener(unsuspend, () => res(texture));\n  }), [srcOrSrcObject]);\n  useEffect(() => {\n    start && texture.image.play();\n    return () => {\n      if (hlsRef.current) {\n        hlsRef.current.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [texture, start]);\n  return texture;\n}\n\n//\n\nconst VideoTexture = ({\n  children,\n  src,\n  ...config\n}) => {\n  const ret = useVideoTexture(src, config);\n  useEffect(() => {\n    return () => void ret.dispose();\n  }, [ret]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children == null ? void 0 : children(ret));\n};\n\nexport { VideoTexture, useVideoTexture };\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,MAAM,QAAQ,QAAQ;AAE/B,IAAIC,gBAAgB,EAAEC,iBAAiB;AACvC,MAAMC,UAAU,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAI,QAAQ,CAACH,gBAAgB,GAAGG,MAAM,CAACC,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGJ,gBAAgB,CAACK,aAAa,CAAC,KAAK,UAAU,IAAI,QAAQ,CAACJ,iBAAiB,GAAGE,MAAM,CAACG,SAAS,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGL,iBAAiB,CAACM,SAAS,CAAC,KAAK,QAAQ;AACjR,IAAIC,UAAU,GAAG,IAAI;AACrB,eAAeC,MAAMA,CAAA,EAAU;EAC7B,IAAIC,WAAW;EACf,CAACA,WAAW,GAAGF,UAAU,MAAM,IAAI,IAAIE,WAAW,KAAK,KAAK,CAAC,GAAGA,WAAW,GAAGF,UAAU,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;EACnH,MAAMG,IAAI,GAAGH,UAAU,CAACI,OAAO;EAC/B,IAAID,IAAI,CAACE,WAAW,CAAC,CAAC,EAAE;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAJDC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAKzB,OAAO,IAAIR,IAAI,CAAC,GAAGM,IAAI,CAAC;EAC1B;EACA,OAAO,IAAI;AACb;AACA,SAASG,eAAeA,CAACC,cAAc,EAS/B;EAAA,IATiC;IACvCC,SAAS,GAAG,gBAAgB;IAC5BC,KAAK,GAAG,IAAI;IACZC,GAAG,EAAEC,SAAS,GAAG,CAAC,CAAC;IACnBC,WAAW,GAAG,WAAW;IACzBC,KAAK,GAAG,IAAI;IACZC,IAAI,GAAG,IAAI;IACXC,WAAW,GAAG,IAAI;IAClB,GAAGC;EACL,CAAC,GAAAf,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAG,CAAC,CAAC;EACJ,MAAMiB,EAAE,GAAGnC,QAAQ,CAACoC,KAAK,IAAIA,KAAK,CAACD,EAAE,CAAC;EACtC,MAAME,MAAM,GAAGxC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMyC,OAAO,GAAGrC,OAAO,CAAC,MAAM,IAAIsC,OAAO,CAAC,MAAMC,GAAG,IAAI;IACrD,IAAIC,GAAG,GAAGP,SAAS;IACnB,IAAIQ,SAAS,GAAGR,SAAS;IACzB,IAAI,OAAOV,cAAc,KAAK,QAAQ,EAAE;MACtCiB,GAAG,GAAGjB,cAAc;IACtB,CAAC,MAAM;MACLkB,SAAS,GAAGlB,cAAc;IAC5B;IACA,MAAMmB,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACtC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,EAAE;MAC3DiC,GAAG;MACHC,SAAS;MACTb,WAAW;MACXE,IAAI;MACJD,KAAK;MACLE,WAAW;MACX,GAAGC;IACL,CAAC,CAAC;;IAEF;IACA,IAAIQ,GAAG,IAAIpC,UAAU,IAAIoC,GAAG,CAACK,QAAQ,CAAC,OAAO,CAAC,EAAE;MAC9C,MAAMnB,GAAG,GAAGU,MAAM,CAACU,OAAO,GAAG,MAAMnC,MAAM,CAACgB,SAAS,CAAC;MACpD,IAAID,GAAG,EAAE;QACPA,GAAG,CAACqB,EAAE,CAAC9C,MAAM,CAAC+C,cAAc,EAAE,MAAM,KAAKtB,GAAG,CAACuB,UAAU,CAACT,GAAG,CAAC,CAAC;QAC7Dd,GAAG,CAACwB,WAAW,CAACR,KAAK,CAAC;MACxB;IACF;IACA,MAAML,OAAO,GAAG,IAAIvC,KAAK,CAACqD,YAAY,CAACT,KAAK,CAAC;IAC7C,IAAI,YAAY,IAAIL,OAAO,EAAEA,OAAO,CAACe,UAAU,GAAGlB,EAAE,CAACmB,gBAAgB,CAAC,KAAKhB,OAAO,CAACiB,QAAQ,GAAGpB,EAAE,CAACqB,cAAc;IAC/Gb,KAAK,CAACc,gBAAgB,CAAChC,SAAS,EAAE,MAAMe,GAAG,CAACF,OAAO,CAAC,CAAC;EACvD,CAAC,CAAC,EAAE,CAACd,cAAc,CAAC,CAAC;EACrB1B,SAAS,CAAC,MAAM;IACd4B,KAAK,IAAIY,OAAO,CAACoB,KAAK,CAACC,IAAI,CAAC,CAAC;IAC7B,OAAO,MAAM;MACX,IAAItB,MAAM,CAACU,OAAO,EAAE;QAClBV,MAAM,CAACU,OAAO,CAACa,OAAO,CAAC,CAAC;QACxBvB,MAAM,CAACU,OAAO,GAAG,IAAI;MACvB;IACF,CAAC;EACH,CAAC,EAAE,CAACT,OAAO,EAAEZ,KAAK,CAAC,CAAC;EACpB,OAAOY,OAAO;AAChB;;AAEA;;AAEA,MAAMc,YAAY,GAAGS,IAAA,IAIf;EAAA,IAJgB;IACpBC,QAAQ;IACRrB,GAAG;IACH,GAAGsB;EACL,CAAC,GAAAF,IAAA;EACC,MAAMG,GAAG,GAAGzC,eAAe,CAACkB,GAAG,EAAEsB,MAAM,CAAC;EACxCjE,SAAS,CAAC,MAAM;IACd,OAAO,MAAM,KAAKkE,GAAG,CAACC,OAAO,CAAC,CAAC;EACjC,CAAC,EAAE,CAACD,GAAG,CAAC,CAAC;EACT,OAAO,aAAapE,KAAK,CAACY,aAAa,CAACZ,KAAK,CAACsE,QAAQ,EAAE,IAAI,EAAEJ,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACE,GAAG,CAAC,CAAC;AAC1G,CAAC;AAED,SAASZ,YAAY,EAAE7B,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}